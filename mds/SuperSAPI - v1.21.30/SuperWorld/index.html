<!DOCTYPE html>
<html lang="zh_CN" data-theme-mode="light" data-light-theme="daylight" data-dark-theme="midnight">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <script src="../stage/protyle/js/lute/lute.min.js"></script>
  <script src="../stage/protyle/js/protyle-html.js?v=3.0.5"></script>
  <link rel="stylesheet" type="text/css" id="baseStyle" href="../stage/build/export/base.css?3.1.9" />
  <link rel="stylesheet" type="text/css" id="themeDefaultStyle" href="../appearance/themes/daylight/theme.css?3.1.9" />
  <link rel="stylesheet" href="../../../styles.css">
  <title>SuperWorld</title>
  <!-- Exported by SiYuan v3.1.9 -->
  <style>
    body {
      font-family: var(--b3-font-family);
      background-color: var(--b3-theme-background);
      color: var(--b3-theme-on-background)
    }

    .b3-typography,
    .protyle-wysiwyg,
    .protyle-title {
      font-size: 16px !important
    }

    .b3-typography code:not(.hljs),
    .protyle-wysiwyg span[data-type~=code] {
      font-variant-ligatures: none
    }

    .li>.protyle-action {
      height: 34px;
      line-height: 34px
    }

    .protyle-wysiwyg [data-node-id].li>.protyle-action~.h1,
    .protyle-wysiwyg [data-node-id].li>.protyle-action~.h2,
    .protyle-wysiwyg [data-node-id].li>.protyle-action~.h3,
    .protyle-wysiwyg [data-node-id].li>.protyle-action~.h4,
    .protyle-wysiwyg [data-node-id].li>.protyle-action~.h5,
    .protyle-wysiwyg [data-node-id].li>.protyle-action~.h6 {
      line-height: 34px;
    }

    .protyle-wysiwyg [data-node-id].li>.protyle-action:after {
      height: 16px;
      width: 16px;
      margin: -8px 0 0 -8px
    }

    .protyle-wysiwyg [data-node-id].li>.protyle-action svg {
      height: 14px
    }

    .protyle-wysiwyg [data-node-id].li:before {
      height: calc(100% - 34px);
      top: 34px
    }

    .protyle-wysiwyg [data-node-id] [spellcheck] {
      min-height: 26px;
    }

    .protyle-wysiwyg .p,
    .protyle-wysiwyg .code-block .hljs,
    .protyle-wysiwyg .table,
    .protyle-wysiwyg .render-node protyle-html,
    .protyle-wysiwyg .render-node>div[spin="1"],
    .protyle-wysiwyg [data-type="NodeHeading"] {}

    .protyle-wysiwyg [data-node-id] {}

    .protyle-wysiwyg .li {
      min-height: 34px
    }

    .protyle-gutters button svg {
      height: 26px
    }
  </style>
</head>

<body>
  <div class="protyle-wysiwyg protyle-wysiwyg--attr" style="max-width: 1200px;margin: 0 auto;" id="preview">
    <div data-subtype="h1" data-node-id="20241016212208-o2n6uxo" data-type="NodeHeading" class="h1"
      id="20241016212208-o2n6uxo" title="SuperWorld" updated="20241016212711">
      <div contenteditable="false" spellcheck="false">SuperWorld</div>
      <div class="protyle-attr" contenteditable="false"></div>
    </div>
    <div data-node-id="20241016212435-lzn17tf" data-type="NodeParagraph" class="p" id="20241016212435-lzn17tf"
      updated="20241016212435">
      <div contenteditable="false" spellcheck="false">以下是<span
          data-type="code">SuperWorld</span>​类的成员变量、类型定义和成员函数的详细说明，以表格形式列出：</div>
      <div class="protyle-attr" contenteditable="false"></div>
    </div>
    <div data-subtype="h3" data-node-id="20241016212435-h0ry3ne" data-type="NodeHeading" class="h3"
      id="20241016212435-h0ry3ne" updated="20241016212435">
      <div contenteditable="false" spellcheck="false">类型定义</div>
      <div class="protyle-attr" contenteditable="false"></div>
    </div>
    <div data-node-id="20241016212435-1hrc70f" data-type="NodeTable" class="table" colgroup="|"
      id="20241016212435-1hrc70f" updated="20241016212435">
      <div contenteditable="false">
        <table contenteditable="false" spellcheck="false">
          <colgroup>
            <col />
            <col />
          </colgroup>
          <thead>
            <tr>
              <th>类型定义</th>
              <th>描述</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>​<span data-type="code">SuperComponentCreateOptions</span>​</td>
              <td>一个类型别名，定义了创建组件时的选项结构，包含目标对象、位置和其他任意数据。</td>
            </tr>
          </tbody>
        </table>
        <div class="protyle-action__table">
          <div class="table__resize"></div>
          <div class="table__select"></div>
        </div>
      </div>
      <div class="protyle-attr" contenteditable="false"></div>
    </div>
    <div data-subtype="h3" data-node-id="20241016212435-tac5l74" data-type="NodeHeading" class="h3"
      id="20241016212435-tac5l74" updated="20241016212435">
      <div contenteditable="false" spellcheck="false">成员变量</div>
      <div class="protyle-attr" contenteditable="false"></div>
    </div>
    <div data-node-id="20241016212435-9evko68" data-type="NodeTable" class="table" colgroup="|"
      id="20241016212435-9evko68" updated="20241016212435">
      <div contenteditable="false">
        <table contenteditable="false" spellcheck="false">
          <colgroup>
            <col />
            <col />
          </colgroup>
          <thead>
            <tr>
              <th>成员变量</th>
              <th>描述</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>​<span data-type="code">source_instance: World</span>​</td>
              <td>保存原生世界实例的引用。</td>
            </tr>
            <tr>
              <td>​<span data-type="code">static Entitys: SuperEntity[]</span>​</td>
              <td>存储所有<span data-type="code">SuperEntity</span>​实例的静态数组。</td>
            </tr>
            <tr>
              <td>​<span data-type="code">static Players: SuperPlayer[]</span>​</td>
              <td>存储所有<span data-type="code">SuperPlayer</span>​实例的静态数组。</td>
            </tr>
          </tbody>
        </table>
        <div class="protyle-action__table">
          <div class="table__resize"></div>
          <div class="table__select"></div>
        </div>
      </div>
      <div class="protyle-attr" contenteditable="false"></div>
    </div>
    <div data-subtype="h3" data-node-id="20241016212435-kkj0g6l" data-type="NodeHeading" class="h3"
      id="20241016212435-kkj0g6l" updated="20241016212711">
      <div contenteditable="false" spellcheck="false">成员函数</div>
      <div class="protyle-attr" contenteditable="false"></div>
    </div>
    <div data-node-id="20241016212435-vshtnku" data-type="NodeTable" class="table" colgroup="|"
      id="20241016212435-vshtnku" updated="20241016212711">
      <div contenteditable="false">
        <table contenteditable="false" spellcheck="false">
          <colgroup>
            <col />
            <col />
          </colgroup>
          <thead>
            <tr>
              <th>成员函数</th>
              <th>描述</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>​<span data-type="code">constructor(source_instance: World)</span>​</td>
              <td>构造函数，初始化世界实例，并保存原生世界实例的引用。</td>
            </tr>
            <tr>
              <td>​<span data-type="code">UpDataPlayers()</span>​</td>
              <td>更新<span data-type="code">Players</span>​数组，确保它包含所有有效的玩家实例。</td>
            </tr>
            <tr>
              <td>​<span data-type="code">ReloadEntitys()</span>​</td>
              <td>重新加载所有实体，从世界中获取并更新<span data-type="code">Entitys</span>​数组。</td>
            </tr>
            <tr>
              <td>​<span data-type="code">AddToEntitys(sp_entity: SuperEntity)</span>​</td>
              <td>将一个新的<span data-type="code">SuperEntity</span>​实例添加到<span data-type="code">Entitys</span>​数组中。</td>
            </tr>
            <tr>
              <td>​<span data-type="code">RemoveEntitysForID(id: string)</span>​</td>
              <td>根据ID从<span data-type="code">Entitys</span>​数组中移除对应的实体实例。</td>
            </tr>
            <tr>
              <td>​<span data-type="code">RemoveFromEntitys(entity: Entity &#124; SuperEntity)</span>​</td>
              <td>移除实体。</td>
            </tr>
            <tr>
              <td>​<span data-type="code">CreateEntityInstance&lt;T extends SuperEntity&gt;(entity: Entity): T</span>​
              </td>
              <td>创建一个新的实体实例，可以是<span data-type="code">SuperEntity</span>​或<span data-type="code">SuperPlayer</span>​。
              </td>
            </tr>
            <tr>
              <td>​<span data-type="code">getAllEntitys()</span>​</td>
              <td>获取所有实体的数组。</td>
            </tr>
            <tr>
              <td>​<span data-type="code">onWorldInitializeBefore(event: WorldInitializeBeforeEvent)</span>​</td>
              <td>世界初始化前的事件处理函数。</td>
            </tr>
            <tr>
              <td>​<span data-type="code">onWorldInitializeAfter(event: WorldInitializeAfterEvent)</span>​</td>
              <td>世界初始化后的事件处理函数。</td>
            </tr>
            <tr>
              <td>​<span data-type="code">readonly afterEvents: WorldAfterEvents</span>​</td>
              <td>世界级别的事件集合，事件发生后的回调。</td>
            </tr>
            <tr>
              <td>​<span data-type="code">readonly beforeEvents: WorldBeforeEvents</span>​</td>
              <td>世界级别的事件集合，事件发生前的回调。</td>
            </tr>
            <tr>
              <td>​<span data-type="code">readonly gameRules: GameRules</span>​</td>
              <td>游戏规则实例。</td>
            </tr>
            <tr>
              <td>​<span data-type="code">readonly isHardcore: boolean</span>​</td>
              <td>指示世界是否为硬核模式。</td>
            </tr>
            <tr>
              <td>​<span data-type="code">readonly scoreboard: Scoreboard</span>​</td>
              <td>世界得分板实例。</td>
            </tr>
            <tr>
              <td>​<span data-type="code">readonly structureManager: StructureManager</span>​</td>
              <td>结构管理器实例。</td>
            </tr>
            <tr>
              <td>​<span data-type="code">broadcastClientMessage(id: string, value: string)</span>​</td>
              <td>广播客户端消息。</td>
            </tr>
            <tr>
              <td>​<span data-type="code">clearDynamicProperties()</span>​</td>
              <td>清除所有动态属性。</td>
            </tr>
            <tr>
              <td>​<span data-type="code">getAbsoluteTime()</span>​</td>
              <td>获取世界自启动以来的绝对时间。</td>
            </tr>
            <tr>
              <td>​<span data-type="code">getAllPlayers()</span>​</td>
              <td>获取所有玩家的数组。</td>
            </tr>
            <tr>
              <td>​<span data-type="code">getDay()</span>​</td>
              <td>获取当前天数。</td>
            </tr>
            <tr>
              <td>​<span data-type="code">getDefaultSpawnLocation()</span>​</td>
              <td>获取默认的生成点位置。</td>
            </tr>
            <tr>
              <td>​<span data-type="code">getDimension(dimensionId: string)</span>​</td>
              <td>根据维度ID获取维度实例。</td>
            </tr>
            <tr>
              <td>​<span data-type="code">getDynamicProperty(identifier: string)</span>​</td>
              <td>获取动态属性的值。</td>
            </tr>
            <tr>
              <td>​<span data-type="code">getDynamicPropertyIds()</span>​</td>
              <td>获取所有动态属性的标识符数组。</td>
            </tr>
            <tr>
              <td>​<span data-type="code">getDynamicPropertyTotalByteCount()</span>​</td>
              <td>获取所有动态属性的总字节大小。</td>
            </tr>
            <tr>
              <td>​<span data-type="code">getEntity(id: string)</span>​</td>
              <td>根据ID获取实体实例。</td>
            </tr>
            <tr>
              <td>​<span data-type="code">getMoonPhase()</span>​</td>
              <td>获取当前的月相。</td>
            </tr>
            <tr>
              <td>​<span data-type="code">getPlayers(options?: EntityQueryOptions)</span>​</td>
              <td>根据查询选项获取玩家数组。</td>
            </tr>
            <tr>
              <td>​<span data-type="code">getTimeOfDay()</span>​</td>
              <td>获取当前的一天中的时间。</td>
            </tr>
            <tr>
              <td>​<span data-type="code">playMusic(trackId: string, musicOptions?: MusicOptions)</span>​</td>
              <td>播放音乐。</td>
            </tr>
            <tr>
              <td>​<span data-type="code">playSound(soundId: string, location: Vector3, soundOptions?:
                  WorldSoundOptions)</span>​</td>
              <td>播放声音。</td>
            </tr>
            <tr>
              <td>​<span data-type="code">queueMusic(trackId: string, musicOptions?: MusicOptions)</span>​</td>
              <td>队列音乐。</td>
            </tr>
            <tr>
              <td>​<span data-type="code">sendMessage(message: (RawMessage &#124; string)[] &#124; RawMessage &#124;
                  string): void</span>​</td>
              <td>给全部玩家发送聊天信息。</td>
            </tr>
            <tr>
              <td>​<span data-type="code">setAbsoluteTime(absoluteTime: number)</span>​</td>
              <td>设置世界绝对时间。</td>
            </tr>
            <tr>
              <td>​<span data-type="code">setDefaultSpawnLocation(spawnLocation: Vector3)</span>​</td>
              <td>设置默认生成点位置。</td>
            </tr>
            <tr>
              <td>​<span data-type="code">setDynamicProperty(identifier: string, value?: boolean &#124; number &#124;
                  string &#124; Vector3): void</span>​</td>
              <td>设置世界的动态属性。</td>
            </tr>
            <tr>
              <td>​<span data-type="code">setTimeOfDay(timeOfDay: number &#124; TimeOfDay): void</span>​</td>
              <td>设置世界时间。</td>
            </tr>
            <tr>
              <td>​<span data-type="code">stopMusic()</span>​</td>
              <td>停止播放音乐。</td>
            </tr>
          </tbody>
        </table>
        <div class="protyle-action__table">
          <div class="table__resize"></div>
          <div class="table__select"></div>
        </div>
      </div>
      <div class="protyle-attr" contenteditable="false"></div>
    </div>
    <div data-subtype="h3" data-node-id="20241016212435-ooemxak" data-type="NodeHeading" class="h3"
      updated="20241016212435" id="20241016212435-ooemxak">
      <div contenteditable="false" spellcheck="false">详细描述</div>
      <div class="protyle-attr" contenteditable="false"></div>
    </div>
    <div data-node-id="20241016212435-zmo09x0" data-type="NodeParagraph" class="p" id="20241016212435-zmo09x0"
      updated="20241016212435">
      <div contenteditable="false" spellcheck="false">​<span data-type="code">SuperWorld</span>​类继承自<span
          data-type="code">Super</span>​类，用于创建和管理游戏世界中的实体和玩家。这个类提供了一系列的事件处理函数，以便在世界发生特定行为时进行响应。</div>
      <div class="protyle-attr" contenteditable="false"></div>
    </div>
    <div data-subtype="h4" data-node-id="20241016212435-psbf3ea" data-type="NodeHeading" class="h4"
      id="20241016212435-psbf3ea" updated="20241016212435">
      <div contenteditable="false" spellcheck="false"><span data-type="code">constructor</span>​</div>
      <div class="protyle-attr" contenteditable="false"></div>
    </div>
    <div data-node-id="20241016212435-tl0jvxr" data-type="NodeParagraph" class="p" id="20241016212435-tl0jvxr"
      updated="20241016212435">
      <div contenteditable="false" spellcheck="false">构造函数初始化世界的<span
          data-type="code">source_instance</span>​，并保存原生世界实例的引用。</div>
      <div class="protyle-attr" contenteditable="false"></div>
    </div>
    <div data-subtype="h4" data-node-id="20241016212435-mq6paaz" data-type="NodeHeading" class="h4"
      id="20241016212435-mq6paaz" updated="20241016212435">
      <div contenteditable="false" spellcheck="false"><span data-type="code">UpDataPlayers</span>​</div>
      <div class="protyle-attr" contenteditable="false"></div>
    </div>
    <div data-node-id="20241016212435-cv4xkz6" data-type="NodeParagraph" class="p" id="20241016212435-cv4xkz6"
      updated="20241016212435">
      <div contenteditable="false" spellcheck="false">更新<span data-type="code">Players</span>​数组，确保它包含所有有效的玩家实例。</div>
      <div class="protyle-attr" contenteditable="false"></div>
    </div>
    <div data-subtype="h4" data-node-id="20241016212435-mt3wmqi" data-type="NodeHeading" class="h4"
      id="20241016212435-mt3wmqi" updated="20241016212435">
      <div contenteditable="false" spellcheck="false"><span data-type="code">ReloadEntitys</span>​</div>
      <div class="protyle-attr" contenteditable="false"></div>
    </div>
    <div data-node-id="20241016212435-ldh118p" data-type="NodeParagraph" class="p" updated="20241016212435"
      id="20241016212435-ldh118p">
      <div contenteditable="false" spellcheck="false">重新加载所有实体，从世界中获取并更新<span data-type="code">Entitys</span>​数组。</div>
      <div class="protyle-attr" contenteditable="false"></div>
    </div>
    <div data-subtype="h4" data-node-id="20241016212435-07svdt2" data-type="NodeHeading" class="h4"
      id="20241016212435-07svdt2" updated="20241016212435">
      <div contenteditable="false" spellcheck="false"><span data-type="code">AddToEntitys</span>​</div>
      <div class="protyle-attr" contenteditable="false"></div>
    </div>
    <div data-node-id="20241016212435-2bx45e9" data-type="NodeParagraph" class="p" id="20241016212435-2bx45e9"
      updated="20241016212435">
      <div contenteditable="false" spellcheck="false">将一个新的<span data-type="code">SuperEntity</span>​实例添加到<span
          data-type="code">Entitys</span>​数组中。</div>
      <div class="protyle-attr" contenteditable="false"></div>
    </div>
    <div data-subtype="h4" data-node-id="20241016212435-fai3hn0" data-type="NodeHeading" class="h4"
      id="20241016212435-fai3hn0" updated="20241016212435">
      <div contenteditable="false" spellcheck="false"><span data-type="code">RemoveEntitysForID</span>​ 和 <span
          data-type="code">RemoveFromEntitys</span>​</div>
      <div class="protyle-attr" contenteditable="false"></div>
    </div>
    <div data-node-id="20241016212435-u51n9id" data-type="NodeParagraph" class="p" id="20241016212435-u51n9id"
      updated="20241016212435">
      <div contenteditable="false" spellcheck="false">根据ID或实体实例从<span data-type="code">Entitys</span>​数组中移除对应的实体。</div>
      <div class="protyle-attr" contenteditable="false"></div>
    </div>
    <div data-subtype="h4" data-node-id="20241016212435-v24i84s" data-type="NodeHeading" class="h4"
      id="20241016212435-v24i84s" updated="20241016212435">
      <div contenteditable="false" spellcheck="false"><span data-type="code">CreateEntityInstance</span>​</div>
      <div class="protyle-attr" contenteditable="false"></div>
    </div>
    <div data-node-id="20241016212435-eoz21es" data-type="NodeParagraph" class="p" id="20241016212435-eoz21es"
      updated="20241016212435">
      <div contenteditable="false" spellcheck="false">创建一个新的实体实例，可以是<span data-type="code">SuperEntity</span>​或<span
          data-type="code">SuperPlayer</span>​。</div>
      <div class="protyle-attr" contenteditable="false"></div>
    </div>
    <div data-subtype="h4" data-node-id="20241016212435-ucampm8" data-type="NodeHeading" class="h4"
      id="20241016212435-ucampm8" updated="20241016212435">
      <div contenteditable="false" spellcheck="false"><span data-type="code">getAllEntitys</span>​ 和 <span
          data-type="code">getAllPlayers</span>​</div>
      <div class="protyle-attr" contenteditable="false"></div>
    </div>
    <div data-node-id="20241016212435-7fi0raw" data-type="NodeParagraph" class="p" id="20241016212435-7fi0raw"
      updated="20241016212435">
      <div contenteditable="false" spellcheck="false">获取所有实体和玩家的数组。</div>
      <div class="protyle-attr" contenteditable="false"></div>
    </div>
    <div data-subtype="h4" data-node-id="20241016212435-xxfh23m" data-type="NodeHeading" class="h4"
      id="20241016212435-xxfh23m" updated="20241016212435">
      <div contenteditable="false" spellcheck="false"><span data-type="code">getEntity</span>​</div>
      <div class="protyle-attr" contenteditable="false"></div>
    </div>
    <div data-node-id="20241016212435-b306dwu" data-type="NodeParagraph" class="p" id="20241016212435-b306dwu"
      updated="20241016212435">
      <div contenteditable="false" spellcheck="false">根据ID获取实体实例。</div>
      <div class="protyle-attr" contenteditable="false"></div>
    </div>
    <div data-subtype="h4" data-node-id="20241016212435-rayx1v2" data-type="NodeHeading" class="h4"
      id="20241016212435-rayx1v2" updated="20241016212435">
      <div contenteditable="false" spellcheck="false"><span data-type="code">getDimension</span>​</div>
      <div class="protyle-attr" contenteditable="false"></div>
    </div>
    <div data-node-id="20241016212435-vwgipp7" data-type="NodeParagraph" class="p" id="20241016212435-vwgipp7"
      updated="20241016212435">
      <div contenteditable="false" spellcheck="false">根据维度ID获取维度实例。</div>
      <div class="protyle-attr" contenteditable="false"></div>
    </div>
    <div data-subtype="h4" data-node-id="20241016212435-ecws7o6" data-type="NodeHeading" class="h4"
      id="20241016212435-ecws7o6" updated="20241016212435">
      <div contenteditable="false" spellcheck="false"><span data-type="code">playMusic</span>​、<span
          data-type="code">playSound</span>​、<span data-type="code">queueMusic</span>​、<span
          data-type="code">stopMusic</span>​</div>
      <div class="protyle-attr" contenteditable="false"></div>
    </div>
    <div data-node-id="20241016212435-4mbi3jr" data-type="NodeParagraph" class="p" id="20241016212435-4mbi3jr"
      updated="20241016212435">
      <div contenteditable="false" spellcheck="false">播放音乐和声音相关的方法。</div>
      <div class="protyle-attr" contenteditable="false"></div>
    </div>
    <div data-subtype="h4" data-node-id="20241016212435-cz0334w" data-type="NodeHeading" class="h4"
      id="20241016212435-cz0334w" updated="20241016212435">
      <div contenteditable="false" spellcheck="false"><span data-type="code">sendMessage</span>​</div>
      <div class="protyle-attr" contenteditable="false"></div>
    </div>
    <div data-node-id="20241016212435-zmz6l9f" data-type="NodeParagraph" class="p" id="20241016212435-zmz6l9f"
      updated="20241016212435">
      <div contenteditable="false" spellcheck="false">向所有玩家发送消息。</div>
      <div class="protyle-attr" contenteditable="false"></div>
    </div>
    <div data-subtype="h4" data-node-id="20241016212435-bhblhig" data-type="NodeHeading" class="h4"
      id="20241016212435-bhblhig" updated="20241016212435">
      <div contenteditable="false" spellcheck="false"><span data-type="code">setAbsoluteTime</span>​、<span
          data-type="code">setTimeOfDay</span>​</div>
      <div class="protyle-attr" contenteditable="false"></div>
    </div>
    <div data-node-id="20241016212435-zby84fb" data-type="NodeParagraph" class="p" id="20241016212435-zby84fb"
      updated="20241016212435">
      <div contenteditable="false" spellcheck="false">设置世界的时间。</div>
      <div class="protyle-attr" contenteditable="false"></div>
    </div>
    <div data-node-id="20241016212435-w0a67c5" data-type="NodeParagraph" class="p" id="20241016212435-w0a67c5"
      updated="20241016212435">
      <div contenteditable="false" spellcheck="false">​<span
          data-type="code">SuperWorld</span>​类提供了一个框架，用于在游戏中创建和管理世界中的实体和玩家，以及响应世界事件。通过这个类，可以方便地扩展和修改游戏世界的行为和属性。</div>
      <div class="protyle-attr" contenteditable="false"></div>
    </div>
  </div>
  <script src="appearance/icons/material/icon.js?3.1.9"></script>
  <script src="stage/build/export/protyle-method.js?3.1.9"></script>
  <script src="stage/protyle/js/lute/lute.min.js?3.1.9"></script>
  <script>
    window.siyuan = {
      config: {
        appearance: { mode: 0, codeBlockThemeDark: "base16/dracula", codeBlockThemeLight: "github" },
        editor: {
          codeLineWrap: true,
          fontSize: 16,
          codeLigatures: false,
          plantUMLServePath: "https://www.plantuml.com/plantuml/svg/~1",
          codeSyntaxHighlightLineNum: false,
          katexMacros: JSON.stringify({}),
        }
      },
      languages: { copy: "复制" }
    };
    const previewElement = document.getElementById('preview');
    Protyle.highlightRender(previewElement, "stage/protyle");
    Protyle.mathRender(previewElement, "stage/protyle", false);
    Protyle.mermaidRender(previewElement, "stage/protyle");
    Protyle.flowchartRender(previewElement, "stage/protyle");
    Protyle.graphvizRender(previewElement, "stage/protyle");
    Protyle.chartRender(previewElement, "stage/protyle");
    Protyle.mindmapRender(previewElement, "stage/protyle");
    Protyle.abcRender(previewElement, "stage/protyle");
    Protyle.htmlRender(previewElement);
    Protyle.plantumlRender(previewElement, "stage/protyle");
    document.querySelectorAll(".protyle-action__copy").forEach((item) => {
      item.addEventListener("click", (event) => {
        let text = item.parentElement.nextElementSibling.textContent.trimEnd();
        text = text.replace(/ /g, " "); // Replace non-breaking spaces with normal spaces when copying
        navigator.clipboard.writeText(text);
        event.preventDefault();
        event.stopPropagation();
      })
    });
  </script>
</body>

</html>